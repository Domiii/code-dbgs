"use strict";(self.webpackChunkdbux_docs=self.webpackChunkdbux_docs||[]).push([[239],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return d}});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=r.createContext({}),c=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=c(e.components);return r.createElement(s.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(t),d=i,f=p["".concat(s,".").concat(d)]||p[d]||m[d]||a;return t?r.createElement(f,o(o({ref:n},u),{},{components:t})):r.createElement(f,o({ref:n},u))}));function d(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,o=new Array(a);o[0]=p;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<a;c++)o[c]=t[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},3755:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(7462),i=t(3366),a=t(7294),o=t(9700),l=["path","children","title"];function s(e){var n=e.path,t=e.children,s=e.title,c=(0,i.Z)(e,l);if(!n)throw new Error('invalid <CodeLink /> missing "path". - props: '+JSON.stringify(e,null,2));var u=(0,o.B)(n);t=t||u,s=s||t;var m="https://github.com/Domiii/dbux/tree/master/"+n;return a.createElement("a",(0,r.Z)({title:s,href:m},c),t)}},5479:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(7462),i=t(3366),a=t(7294),o=t(9700),l=t(8767),s=["name","children","title"];function c(e){var n=e.name,t=e.children,c=e.title,u=(0,i.Z)(e,s);if(null==n||!n.includes)throw new Error('Invalid ToolLink does not have a "name" of type string. - props: '+JSON.stringify(e,null,2));if(n.includes("/"))throw new Error('ToolLink\'s "name" must not be a path. - props: '+JSON.stringify(e,null,2));if(!n)throw new Error('invalid <ToolLink /> missing "name". - props: '+JSON.stringify(e,null,2));var m=(0,o.B)(n);t=t||m,c=c||m;var p=(0,l.Z)()+"tools-and-configuration/"+n;return a.createElement("a",(0,r.Z)({title:c,href:p},u),t)}},8767:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(2263);function i(){return(0,r.Z)().siteConfig.baseUrl}},9700:function(e,n,t){t.d(n,{B:function(){return i}});var r={"dbux-code":"Dbux VSCode Extension"};function i(e){var n=r[e];return n||(e.startsWith("dbux-")&&!e.startsWith("dbux-code")?"@dbux/"+e.substring(5):e)}},5964:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return c},contentTitle:function(){return u},metadata:function(){return m},toc:function(){return p},default:function(){return f}});var r=t(7462),i=t(3366),a=(t(7294),t(3905)),o=t(5479),l=t(3755),s=["components"],c={},u="Performance",m={unversionedId:"guides/performance",id:"guides/performance",title:"Performance",description:"There are many performance considerations in tracing and recording all activity of a program.",source:"@site/content/guides/02-performance.mdx",sourceDirName:"guides",slug:"/guides/performance",permalink:"/dbux/guides/performance",editUrl:"https://github.com/Domiii/dbux/blob/master/docs/content/guides/02-performance.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Runtime Trace Filtering",permalink:"/dbux/guides/runtime-trace-filtering"},next:{title:"Build Pipeline Integration",permalink:"/dbux/guides/build-pipeline-integration"}},p=[{value:"Performance Considerations",id:"performance-considerations",children:[],level:2},{value:"Improving Performance",id:"improving-performance",children:[],level:2},{value:"A Comment on Performance",id:"a-comment-on-performance",children:[],level:2},{value:"TODO: Some Results",id:"todo-some-results",children:[],level:2}],d={toc:p};function f(e){var n=e.components,t=(0,i.Z)(e,s);return(0,a.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"performance"},"Performance"),(0,a.kt)("p",null,"There are many performance considerations in tracing and recording ",(0,a.kt)("em",{parentName:"p"},"all")," activity of a program."),(0,a.kt)("h2",{id:"performance-considerations"},"Performance Considerations"),(0,a.kt)("p",null,"Main considerations include:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Instrumentation can be slow.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)(o.Z,{name:"dbux-cli",mdxType:"ToolLink"})," uses a custom implementation of [`@babel/register`](https://babeljs.io/docs/en/babel-register). * That implementation provides improved caching. Make sure to enable `caching` when using ",(0,a.kt)(o.Z,{name:"dbux-cli",mdxType:"ToolLink"}),". * It currently has limited configuration, but we hope for more in the future."),(0,a.kt)("li",{parentName:"ul"},"If you use a bundler, you might want to configure caching for it as well, especially to reduce cold-start overhead. ",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"E.g.: ",(0,a.kt)("inlineCode",{parentName:"li"},"cacheDirectory")," for ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/babel/babel-loader"},"webpack's babel-loader")))))),(0,a.kt)("li",{parentName:"ul"},"When executing ",(0,a.kt)("em",{parentName:"li"},"a lot of stuff")," (e.g. long loops or high FPS games etc), things will get slow:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"A simple loop with 1 million+ iterations will already get pretty slow. It generates 100+MB of serialized data and significantly increases memory pressure on ",(0,a.kt)(o.Z,{name:"dbux-runtime",mdxType:"ToolLink"})," as well as ",(0,a.kt)(o.Z,{name:"dbux-code",mdxType:"ToolLink"}),"."),(0,a.kt)("li",{parentName:"ul"},"For the same reason, Dbux probably is not yet able to cope with a 30+FPS game running for more than a few seconds."))),(0,a.kt)("li",{parentName:"ul"},"When running a program with Dbux enabled, and also running it in debug mode in Node (i.e. ",(0,a.kt)("inlineCode",{parentName:"li"},"--inspect")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"--inspect-brk"),"), things slow down even worse. When things get too slow, you might want to consider using the ",(0,a.kt)("inlineCode",{parentName:"li"},"Run")," button instead of the ",(0,a.kt)("inlineCode",{parentName:"li"},"Debug")," button, and use the Dbux built-in features for debugging; unless there are some features in the traditional debugger that you just cannot live without in some specific circumstances."),(0,a.kt)("li",{parentName:"ul"},"Recording of large arrays and objects is limited, according to some (currently hardcoded) ",(0,a.kt)("inlineCode",{parentName:"li"},"SerializationLimits"),", to be found in ",(0,a.kt)(l.Z,{path:"dbux-runtime/src/data/valueCollection.js",mdxType:"CodeLink"}),".")),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Improving performance and adding performance enhancing mechanisms is ",(0,a.kt)("a",{parentName:"p",href:"/dbux/advanced/future-work"},"future work"),"."))),(0,a.kt)("h2",{id:"improving-performance"},"Improving Performance"),(0,a.kt)("p",null,"Main steps to take to improve performance:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Join our ",(0,a.kt)("a",{parentName:"li",href:"https://discord.gg/QKgq9ZE"},"Discord")," and share your story, so we can advise, and also consider what types of performance improvements are most wanted."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"/dbux/guides/runtime-trace-filtering"},"Disable tracing of specific files, statements or expressions"),", if they are not important for your analysis."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"tracesDisabled")," can significantly improve performance because it only traces function executions, no more individual statements or values.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"TODO: explain how")))),(0,a.kt)("h2",{id:"a-comment-on-performance"},"A Comment on Performance"),(0,a.kt)("p",null,"Performance and scalability issues are often cited as the biggest problems for ",(0,a.kt)("a",{parentName:"p",href:"/dbux/background/debugging"},"omniscient debuggers"),". However, as Henry Liebermann pointed out in reference to his omniscient debugger (called ZStep 95) in 1997",(0,a.kt)("sup",{parentName:"p",id:"fnref-1"},(0,a.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1")),': "Even in an extremely large program, where keeping a complete history is infeasible, judicious testing can often isolate a fragement of the code which is not too large to run ZStep on. Nevertheless, we admit that there may be bugs that appear only after long runs involving large amounts of code, and so our techniques may be inappropriate in these cases. However, we conjecture that the vast majority of bugs are relatively shallow, and the productivity improvements from finding".'),(0,a.kt)("p",null,"We believe, this applies to any omniscient debugger. While even large applications can be debugged with it, Dbux and its omniscient peers will falter when confronted with bugs in applications with high event frequency, such as games or algorithms with long-running loops. In order to make better use of Dbux in those cases, you (for now) need to first manually narrow down the bug to a shorter test case or short manual test run, before starting to use Dbux on them."),(0,a.kt)("h2",{id:"todo-some-results"},"TODO: Some Results"),(0,a.kt)("p",null,"TODO: provide some numbers"))}f.isMDXComponent=!0}}]);